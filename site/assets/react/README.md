# React UI Standard (v1) — «Ваш Финдир» (Tabler-first)

**Цель:** быстро развивать Dashboard v1, не ломая Symfony/Twig UI.  
**Принцип:** React = *острова (widgets)* внутри Twig, стиль и верстка = **Tabler UI**.

---

## 1) Границы React (v1)

### ✅ Используем React для
- Dashboard: виджеты, фильтры, переключения периодов, графики/таблицы.
- Сложные интерактивные элементы: drag/drop, большие списки, real-time.
- Компоненты, которые живут на API и часто обновляются.

### ❌ Не используем React для
- CRUD-страниц, форм, простых списков, деталей сущностей.
- Навигации сайта, layout, sidebar/topbar (это Twig/Tabler).

---

## 2) Архитектура: Islands внутри Twig

- Каждая React-зона монтируется в конкретный контейнер на Twig-странице.
- Данные для первичного рендера передаются через `data-*` или JSON-скрипт.
- React общается только с backend API (Symfony JSON endpoints).

**Правило:** Symfony контролирует маршруты, права, активную компанию, lock-period. React — только UI.

---

## 3) Структура папок (feature-first)

`assets/react/`
- `app/` — общий bootstrap React (init/mount, providers)
- `shared/` — общие UI/утилиты (минимально, без “помойки”)
- `dashboard/` — Dashboard v1
    - `widgets/`
    - `components/`
    - `api/`
    - `types/`
    - `pages/` (если внутри зоны есть мини-роутинг)

**Правило:** все новое — сначала в feature-папку, в `shared/` только после 2+ повторных использований.

---

## 4) Entry points (Webpack Encore)

- Один entry на крупную зону:
    - `dashboard-v1` (минимум)
- Не заводим entry на каждый компонент.

**Правило:** меньше entry = проще деплой, кеш, дебаг.

---

## 5) UI и стиль (Tabler-first)

- Используем **Tabler CSS + компоненты** (cards, grid, typography, buttons).
- Tailwind допускается только как utility “дополнить”, но **Tabler главный**.
- Не добавляем новый UI-kit.

### Типовые паттерны Tabler
- Layout: `container-xl`, `row`, `col-*`
- Cards: `card`, `card-header`, `card-body`
- Buttons: `btn`, `btn-primary`, `btn-outline-*`
- States: `placeholder`, `empty`, `alert`, `spinner-border`

---

## 6) Типографика

- По умолчанию **font-weight 400**.
- `600` только точечно и осознанно (заголовок/CTA), без “жирного UI везде”.

---

## 7) Данные и API-контракт

- React не получает Doctrine Entity “как есть”.
- API возвращает стабильные DTO/shape:
    - даты в ISO-8601
    - деньги: `amount` (int, копейки) + `currency` (string)
- Любой breaking change в API = отдельный PR и согласование.

---

## 8) Auth / безопасность

- Источник истины — сервер.
- UI может скрывать кнопки, но права проверяются на backend.
- Все POST/PUT/DELETE запросы — с CSRF (если session-based).

---

## 9) Ошибки и UX-состояния (обязательно)

Каждый виджет обязан иметь:
- `loading`
- `empty`
- `error` (с сообщением)
- `success` (рендер данных)

**Правило:** ни одного “пустого белого блока” без состояния.

---

## 10) Производительность (минимум правил)

- Большие списки (сообщения/операции) → виртуализация.
- Не храним “всё за год” в памяти — используем пагинацию/период/ленивую подгрузку.

---

## 11) Состояние (v1)

- По умолчанию: локальный state + простые hooks.
- Redux/глобальный state — только если реально появился конфликт/сложность (не заранее).

---

## 12) Качество и контроль изменений

- Любой виджет = атомарный PR.
- Не трогаем Twig/layout/маршруты, если задача только “React UI”.
- Для каждого виджета: минимум 1 happy-path + 1 error-path проверка руками (smoke).

---

## 13) Naming / conventions

- Компоненты: `PascalCase.tsx`
- Хуки: `useSomething.ts`
- API-клиент: `*/api/*.ts`
- Типы: `*/types/*.ts`
- CSS: избегаем кастомного CSS; если нужен — локально и минимально.

---

## Definition of Done (Dashboard widget)

Виджет считается готовым если:
- визуально соответствует Tabler,
- имеет loading/empty/error,
- работает через API Symfony,
- не ломает существующий Twig UI,
- атомарно добавлен (без массового рефактора).
