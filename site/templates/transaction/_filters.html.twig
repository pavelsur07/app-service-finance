<div class="offcanvas offcanvas-end" tabindex="-1" id="transaction-filters-offcanvas" aria-labelledby="transaction-filters-offcanvas-label">
    <div class="offcanvas-header">
        <h2 class="offcanvas-title" id="transaction-filters-offcanvas-label">Фильтры</h2>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
    </div>
    <div class="offcanvas-body">
        <form method="get" id="filter-form" class="d-flex flex-column gap-4">
            <div class="row g-3">
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter_date_from">Дата с</label>
                    <input type="date" id="filter_date_from" name="dateFrom" value="{{ filters.dateFrom ?? '' }}" class="form-control" />
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter_date_to">Дата по</label>
                    <input type="date" id="filter_date_to" name="dateTo" value="{{ filters.dateTo ?? '' }}" class="form-control" />
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-account">Счет</label>
                    <select id="filter-account" name="accountId" class="form-select">
                        <option value="">Все</option>
                        {% for a in accounts %}
                            <option value="{{ a.id }}" {% if filters.accountId == a.id %}selected{% endif %}>{{ a.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-category">Статья ДДС</label>
                    <select id="filter-category" name="categoryId" class="form-select">
                        <option value="">Все</option>
                        {% for c in categories %}
                            <option value="{{ c.id }}" {% if filters.categoryId == c.id %}selected{% endif %}>
                                {% if c.level > 1 %}
                                    {% for i in 1..(c.level - 1) %}&nbsp;&nbsp;{% endfor %}
                                {% endif %}
                                {{ c.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-counterparty">Контрагент</label>
                    <select id="filter-counterparty" name="counterpartyId" class="form-select">
                        <option value="">Все</option>
                        {% for c in counterparties %}
                            <option value="{{ c.id }}" {% if filters.counterpartyId == c.id %}selected{% endif %}>{{ c.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-direction">Направление</label>
                    <select id="filter-direction" name="direction" class="form-select">
                        <option value="">Все</option>
                        <option value="INFLOW" {% if filters.direction == 'INFLOW' %}selected{% endif %}>Приток</option>
                        <option value="OUTFLOW" {% if filters.direction == 'OUTFLOW' %}selected{% endif %}>Отток</option>
                    </select>
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-amount-min">Сумма от</label>
                    <input type="number" step="0.01" id="filter-amount-min" name="amountMin" value="{{ filters.amountMin ?? '' }}" class="form-control" />
                </div>
                <div class="col-12 col-sm-6">
                    <label class="form-label" for="filter-amount-max">Сумма до</label>
                    <input type="number" step="0.01" id="filter-amount-max" name="amountMax" value="{{ filters.amountMax ?? '' }}" class="form-control" />
                </div>
                <div class="col-12">
                    <label class="form-label" for="filter-query">Поиск</label>
                    <input type="text" id="filter-query" name="q" value="{{ filters.q ?? '' }}" class="form-control" placeholder="Описание" />
                </div>
            </div>

            <div class="d-flex flex-wrap gap-2">
                <button type="button" class="btn btn-outline-secondary" data-period="today">Сегодня</button>
                <button type="button" class="btn btn-outline-secondary" data-period="yesterday">Вчера</button>
                <button type="button" class="btn btn-outline-secondary" data-period="week">Текущая неделя</button>
                <button type="button" class="btn btn-outline-secondary" data-period="month">Текущий месяц</button>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Применить</button>
                <a href="{{ path('cash_transaction_index') }}" class="btn btn-outline-secondary">Сбросить</a>
            </div>
        </form>
    </div>
</div>
