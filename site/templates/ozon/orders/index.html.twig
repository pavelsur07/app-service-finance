{% extends 'base.html.twig' %}

{% block body %}
{% for message in app.flashes('success') %}
  <div class="alert alert-success" role="alert">
    {{ message }}
  </div>
{% endfor %}
{% for message in app.flashes('error') %}
  <div class="alert alert-danger" role="alert">
    {{ message }}
  </div>
{% endfor %}
<h1>Ozon Orders</h1>
<a href="{{ path('ozon_orders_sync') }}" class="btn btn-primary mb-2">Обновить</a>
<a href="{{ path('ozon_orders_api') }}" class="btn btn-secondary mb-2" target="_blank">Вывести на экран</a>
<table class="table">
    <thead>
    <tr>
        <th>Posting</th>
        <th>Scheme</th>
        <th>Status</th>
        <th>Status Updated</th>
        <th>Warehouse</th>
        <th>Raw</th>
    </tr>
    </thead>
    <tbody>
    {% for order in orders %}
        <tr>
            <td><a href="{{ path('ozon_order_show', {id: order.id}) }}">{{ order.postingNumber }}</a></td>
            <td>{{ order.scheme }}</td>
            <td>{{ order.status }}</td>
            <td>{{ order.statusUpdatedAt|date('Y-m-d H:i') }}</td>
            <td>{{ order.warehouseId }}</td>
            <td><button onclick="alert(JSON.stringify({{ order.raw|json_encode|raw }}))">Raw</button></td>
        </tr>
    {% else %}
        <tr><td colspan="6">No orders</td></tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
