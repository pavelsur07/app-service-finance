{% extends 'base.html.twig' %}
{% block title %}Результат импорта{% endblock %}

{% block breadcrumbs %}
    {% include 'partials/_breadcrumbs.html.twig' with {
        breadcrumbs: [
            {'label':'Главная','path':'app_home_index'},
            {'label':'Финансы'},
            {'label':'Импорт','path':'bank1c_import_form'},
            {'label':'Результат'}
        ]
    } %}
{% endblock %}

{% block content %}
    <h2 class="page-title mb-3">Результат импорта</h2>
    <div class="card mb-3">
        <div class="card-body">
            <div class="row">
                <div class="col">Всего: {{ result.total }}</div>
                <div class="col">Создано: {{ result.created }}</div>
                <div class="col">Дубликаты: {{ result.duplicates }}</div>
                <div class="col">Ошибки: {{ result.errors|length }}</div>
            </div>
        </div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>Дата</th>
                <th>Направление</th>
                <th>Сумма</th>
                <th>Контрагент</th>
                <th>Назначение</th>
            </tr>
        </thead>
        <tbody>
            {% for s in result.samples %}
                <tr>
                    <td>{{ s.date }}</td>
                    <td>{{ s.direction }}</td>
                    <td>{{ s.amount }}</td>
                    <td>{{ s.counterparty }}</td>
                    <td>{{ s.purpose }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if result.errors %}
        <div class="alert alert-danger">
            <ul>
                {% for e in result.errors %}
                    <li>{{ e }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
    <a href="{{ path('bank1c_import_form') }}" class="btn btn-primary">Импортировать ещё</a>
{% endblock %}
