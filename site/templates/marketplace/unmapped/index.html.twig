{% extends 'base.html.twig' %}

{% block title %}Маркетплейсы{% endblock %}

{% block body %}
    {% set active_tab = active_tab|default('') %}

    <div class="page-header d-print-none">
        <div class="container-xl">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <h2 class="page-title">Маркетплейсы</h2>
                </div>
            </div>
        </div>
    </div>

    <div class="page-body">
        <div class="container-xl">

            {# Flash messages #}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label == 'error' ? 'danger' : label }} alert-dismissible mb-3" role="alert">
                        <div class="d-flex">
                            <div>{{ message }}</div>
                        </div>
                        <a class="btn-close" data-bs-dismiss="alert" aria-label="close"></a>
                    </div>
                {% endfor %}
            {% endfor %}

            {# Tabs #}
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                        <li class="nav-item">
                            <a href="{{ path('marketplace_index') }}"
                               class="nav-link {{ active_tab == 'marketplace' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="7" cy="18" r="2" /><circle cx="7" cy="6" r="2" /><circle cx="17" cy="12" r="2" /><line x1="7" y1="8" x2="7" y2="16" /><path d="M7 8a4 4 0 0 0 4 4h4" /></svg>
                                Интеграции
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_sales_index') }}"
                               class="nav-link {{ active_tab == 'sales' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></svg>
                                Продажи
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_returns_index') }}"
                               class="nav-link {{ active_tab == 'returns' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4" /><path d="M5 10h11a4 4 0 1 1 0 8h-1" /></svg>
                                Возвраты
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_costs_index') }}"
                               class="nav-link {{ active_tab == 'costs' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12" /><path d="M20 12v4h-4a2 2 0 0 1 0 -4h4" /></svg>
                                Затраты
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_products_index') }}"
                               class="nav-link {{ active_tab == 'listings' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="6" height="6" rx="1" /><rect x="14" y="4" width="6" height="6" rx="1" /><rect x="4" y="14" width="6" height="6" rx="1" /><rect x="14" y="14" width="6" height="6" rx="1" /></svg>
                                Листинг
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_unmapped_listings_index') }}"
                               class="nav-link {{ active_tab == 'unmapped' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" /></svg>
                                Unmapped
                                {% if unmapped_count is defined and unmapped_count > 0 %}
                                    <span class="badge badge-sm bg-yellow ms-2">{{ unmapped_count }}</span>
                                {% endif %}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_cost_categories_index') }}"
                               class="nav-link {{ active_tab == 'cost_categories' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="9" y1="6" x2="20" y2="6" /><line x1="9" y1="12" x2="20" y2="12" /><line x1="9" y1="18" x2="20" y2="18" /><line x1="4" y1="6" x2="4" y2="6.01" /><line x1="4" y1="12" x2="4" y2="12.01" /><line x1="4" y1="18" x2="4" y2="18.01" /></svg>
                                Справочник
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ path('marketplace_analytics_index') }}"
                               class="nav-link {{ active_tab == 'analytics' ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 19l16 0" /><path d="M4 15l4 -6l4 2l4 -5l4 4" /></svg>
                                Аналитика
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="card-body p-0">
                    {% block tab_content %}{% endblock %}
                </div>
            </div>

        </div>
    </div>

    {% block modals %}{% endblock %}

{% endblock %}
